{"version":3,"file":"js/29.3090399c.js","mappings":"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","sources":["webpack://sketch/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://sketch/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://sketch/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://sketch/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://sketch/./src/views/sketch/graph/utils/v2.ts","webpack://sketch/./src/views/sketch/graph/event/panzoom.ts","webpack://sketch/./src/views/sketch/graph/layer/index.ts","webpack://sketch/./src/views/sketch/graph/layer/path.ts","webpack://sketch/./src/views/sketch/graph/layer/pen.ts","webpack://sketch/./src/views/sketch/graph/layer/eraser.ts","webpack://sketch/./src/views/sketch/graph/event/draw.ts","webpack://sketch/./src/views/sketch/graph/utils/magicWand.ts","webpack://sketch/./src/views/sketch/graph/utils/getRGBA.ts","webpack://sketch/./src/views/sketch/graph/layer/Rasterized.ts","webpack://sketch/./src/views/sketch/graph/event/buket.ts","webpack://sketch/./src/views/sketch/graph/event/index.ts","webpack://sketch/./src/views/sketch/graph/index.ts","webpack://sketch/./src/components/header/HeaderBar.vue?11cc","webpack://sketch/./src/components/header/HeaderBar.vue","webpack://sketch/./src/components/header/HeaderBar.vue?eb1b"],"sourcesContent":["export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default class Coord {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  matrix(\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    e: number,\n    f: number\n  ): Coord {\n    const x = this.x;\n    const y = this.y;\n    this.x = a * x + b * y + c;\n    this.y = d * x + e * y + f;\n\n    return this;\n  }\n\n  translate(dx: number, dy: number): Coord {\n    this.x += dx;\n    this.y += dy;\n\n    return this;\n  }\n\n  move(dx: number, dy: number): Coord {\n    return this.translate(dx, dy);\n  }\n\n  rotate(a: number): Coord {\n    const c = Math.cos(a);\n    const s = Math.sin(a);\n\n    this.matrix(c, -s, 0, s, c, 0);\n\n    return this;\n  }\n\n  scale(kx: number, ky: number): Coord {\n    this.x *= kx;\n    this.y *= ky;\n    return this;\n  }\n\n  skewX(angle: number): Coord {\n    angle = (angle / 180) * Math.PI;\n    const tan = Math.tan(angle);\n    return this.matrix(1, tan, 0, 0, 1, 0);\n  }\n\n  skewY(angle: number): Coord {\n    angle = (angle / 180) * Math.PI;\n    const tan = Math.tan(angle);\n    return this.matrix(1, 0, 0, tan, 1, 0);\n  }\n\n  norm(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  normalVector(): Coord {\n    const n = this.norm();\n    return n === 0 ? this : new Coord(this.y / n, -this.x / n);\n  }\n\n  unit(): Coord {\n    const n = this.norm();\n    return n === 0 ? this : new Coord(this.x / n, this.y / n);\n  }\n\n  angle (x = 1, y = 0): number {\n    const n = this.norm()\n    const n2 = Math.sqrt(x * x + y * y);\n    if (n * n2 === 0) return 0\n    const d = this.dot(x, y);\n    const cos = Math.max(-1, Math.min(1, d / n / n2))\n    \n    return Math.acos(cos);\n  }\n\n  // 向量内积\n  dot(x: number, y: number): number {\n\n    return this.x * x + this.y * y;\n  }\n\n  // 向量外积\n  cross(x: number, y: number): number {\n    return this.x * y - this.y * x;\n  }\n\n  flip(x0: number, y0: number, x1: number, y1: number): Coord {\n    const { x, y } = this;\n    const [m, n] = [x - x0, y - y0];\n    const [p, q] = [x1 - x0, y1 - y0];\n    if (p !== 0 || q !== 0){\n      const d = p * p + q * q;\n      this.x = (m * (p * p - q * q) + 2 * n * p * q) / d + x0;\n      this.y = (n * (q * q - p * p) + 2 * m * p * q) / d + y0;\n    }\n    return this;\n  }\n}\n","import Graph from \"..\"\nimport Coord from '../utils/v2'\n\nlet x0: number, x1: number, y0: number, y1: number;\n\nexport default function (cvs: Graph): void {\n  cvs.on('touchstart', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 2) {\n      x0 = ev.touches[0].pageX\n      y0 = ev.touches[0].pageY\n      x1 = ev.touches[1].pageX\n      y1 = ev.touches[1].pageY\n    }\n  })\n\n  cvs.on('touchmove', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 2) {\n      const _x0 = ev.touches[0].pageX\n      const _y0 = ev.touches[0].pageY\n      const _x1 = ev.touches[1].pageX\n      const _y1 = ev.touches[1].pageY\n      const v = new Coord(x1 - x0, y1 - y0)\n      const _v = new Coord(_x1 - _x0, _y1 - _y0)\n      const ang = v.angle(_v.x, _v.y)\n      const angle = v.cross(_v.x, _v.y) > 0 ? ang : -ang\n      const k = _v.norm() / v.norm()\n      const c0 = cvs.getRelativeCoord((x0 + x1) / 2, (y0 + y1) / 2)\n      \n      cvs.rotation += angle\n      cvs.scale *= k\n      // cvs.scale = Math.min(5, Math.max(0.1, cvs.scale * k))\n      c0.rotate(cvs.rotation)\n        .scale(cvs.scale, cvs.scale)\n      const c1 = new Coord((_x0 + _x1) / 2, (_y0 + _y1) / 2).move(-c0.x, -c0.y)\n      cvs.x = c1.x\n      cvs.y = c1.y\n\n      x0 = _x0\n      x1 = _x1\n      y0 = _y0\n      y1 = _y1\n    }\n  })\n}","export interface BoundingBox {\n  x: number,\n  y: number,\n  w: number,\n  h: number\n}\n\nexport abstract class Layer {\n  abstract readonly type: string;\n  abstract draw (ctx: CanvasRenderingContext2D): void\n  abstract getData (): any;\n}","import { Layer } from \".\"\n\ninterface PathOption {\n  data?: number[],\n  size?: number,\n  color?: string,\n}\n\nexport default abstract class Path extends Layer {\n  type = 'Path'\n  color = '#000'\n  size = 1\n  data: number[] = []\n  \n  constructor (option: PathOption) {\n    super()\n\n    Object.assign(this, option)\n  }\n\n  getData () {\n    return {\n      type: this.type,\n      size: this.size,\n      color: this.color,\n      data: this.data\n    }\n  }\n\n  abstract draw (ctx: CanvasRenderingContext2D): void\n}","import Path from \"./path\"\n\nexport default class Pen extends Path {\n  readonly type = 'Pen'\n  draw (ctx: CanvasRenderingContext2D): void {\n    const { size, color, data } = this\n    if (data.length === 2) {\n      ctx.beginPath()\n      ctx.arc(data[0], data[1], size / 2, 0, Math.PI * 2)\n      ctx.closePath()\n      ctx.fillStyle = color\n      ctx.fill()\n    } else {\n      ctx.beginPath()\n      ctx.moveTo(data[0], data[1])\n      for (let i = 2; i < data.length; i += 2) {\n        ctx.lineTo(data[i], data[i + 1])\n      }\n      ctx.strokeStyle = color\n      ctx.lineWidth = size\n      ctx.lineCap = 'round'\n      ctx.lineJoin = 'round'\n      ctx.stroke()\n      ctx.closePath()\n    }\n  }\n}","import Path from \"./path\"\n\nexport default class Eraser extends Path {\n  readonly type = 'Eraser'\n  draw (ctx: CanvasRenderingContext2D): void {\n    const { size, data } = this\n    if (data.length < 4) return\n  \n    ctx.globalCompositeOperation = 'destination-out'\n    ctx.beginPath()\n    ctx.moveTo(data[0], data[1])\n    for (let i = 2; i < data.length; i += 2) {\n      ctx.lineTo(data[i], data[i + 1])\n    }\n    ctx.strokeStyle = `#000`\n    ctx.lineWidth = size\n    ctx.lineCap = 'round'\n    ctx.lineJoin = 'round'\n    ctx.stroke()\n    ctx.closePath()\n  }\n}","import Graph from \"..\"\nimport Pen from '../layer/pen'\nimport Eraser from '../layer/eraser'\nimport Path from '../layer/path'\n\nlet path: Path | null = null;\nlet moved = false;\nconst offsetY = 45;\n\nexport default function (graph: Graph): void {\n  graph.on('touchstart', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 1) {\n      if (graph.state.mode === 'pen') {\n        path = new Pen({ size: graph.state.pen.size, color: graph.state.pen.color })\n      } else {\n        path = new Eraser({ size: graph.state.eraser.size })\n      }\n      const c = graph.getRelativeCoord(ev.touches[0].pageX, ev.touches[0].pageY - offsetY)\n      path.data.push(c.x, c.y)\n    }\n  })\n\n  graph.on('touchmove', e => {\n    const ev = e as TouchEvent\n    if (ev.touches.length === 1) {\n      if (path) {\n        const c = graph.getRelativeCoord(ev.touches[0].pageX, ev.touches[0].pageY - offsetY)\n        path.data.push(c.x, c.y)\n        if (!moved) {\n          graph.activePath = path\n          moved = true\n        }\n      }\n    }\n  })\n\n  graph.on('touchend', () => {\n    if (moved) graph.add(path as Path)\n    moved = false;\n    graph.activePath = path = null\n  })\n}","export default function magicWand (imageData: ImageData, px: number, py: number): number[][] {\n  const equal = (p1: number[], p2: number[]): boolean => {\n    return p1[0] == p2[0] && p1[1] == p2[1] && p1[2] == p2[2] && p1[3] == p2[3]\n  }\n\n  const d = imageData.data;\n  const w = imageData.width;\n  const h = imageData.height;\n  const checked = new Set();\n  const res = [[px, py]];\n  const i = (py * w + px) * 4;\n  const p0 = [d[i], d[i + 1], d[i + 2], d[i + 3]];\n\n  const check = (x: number, y: number) => {\n    const key = `${x},${y}`\n    if (checked.has(key)) return\n    checked.add(key);\n\n    const i = (y * w + x) * 4\n    if (equal(p0, [d[i], d[i + 1], d[i + 2], d[i + 3]])) {\n      res.push([x, y])\n    }\n  }\n\n  let index = 0\n  while (index < res.length) {\n    const [x, y] = res[index];\n    \n    if (y > 0) check(x, y - 1)\n    if (x > 0) check(x - 1, y)\n    if (x < w - 1) check(x + 1, y)\n    if (y < h - 1) check(x, y + 1)\n    index++;\n  }\n\n  return res;\n}","const cvs = document.createElement('canvas')\nconst ctx = cvs.getContext('2d') as CanvasRenderingContext2D\nexport default function (color: string) {\n  ctx.fillStyle = color\n  ctx.fillRect(0, 0, 1, 1)\n  const data = ctx.getImageData(0, 0, 1, 1).data\n  return {\n    r: data[0],\n    g: data[1],\n    b: data[2],\n    a: data[3]\n  }\n}","import { Layer } from \".\"\nimport Graph from \"..\"\nimport magicWand from \"../utils/magicWand\"\nimport getRGBA from \"../utils/getRGBA\"\n\nexport default class Rasterized extends Layer {\n  type = 'Rasterized'\n  x = 0\n  y = 0\n  color = '#fff'\n  graph: Graph\n  rasterized: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    rotation: number;\n    canvas: HTMLCanvasElement\n  } | null = null\n\n  constructor (graph: Graph, x: number, y: number, color: string) {\n    super()\n    this.graph = graph\n    this.x = x\n    this.y = y\n    this.color = color\n  }\n\n  getData () {\n    return {\n      type: this.type,\n      x: this.x,\n      y: this.y,\n      color: this.color\n    }\n  }\n\n  draw (ctx: CanvasRenderingContext2D): void {\n    if (!this.rasterized) {\n      const { graph, color, x, y } = this\n      const { r, g, b, a } = getRGBA(color)\n      const imageData = graph.ctx2.getImageData(0, 0, graph.width, graph.height)\n      const res = magicWand(imageData, x, y)\n      let x0 = res[0][0]\n      let y0 = res[0][1]\n      let x1 = x0\n      let y1 = y0\n      res.forEach(([_x, _y]) => {\n        if (_x < x0) x0 = _x\n        if (_y < y0) y0 = _y\n        if (_x > x1) x1 = _x\n        if (_y > y1) y1 = _y\n      })\n      const canvas = document.createElement('canvas')\n      const width = Math.floor(x1 - x0) + 1\n      const height = Math.floor(y1 - y0) + 1\n      canvas.width = width\n      canvas.height = height\n      const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n      const _imageData = ctx.createImageData(width, height)\n      res.forEach(([px, py]) => {\n        const i = (px - x0 + (py - y0) * width) * 4\n        _imageData.data[i] = r\n        _imageData.data[i + 1] = g\n        _imageData.data[i + 2] = b\n        _imageData.data[i + 3] = a\n      })\n      ctx.putImageData(_imageData, 0, 0)\n      const v = graph.getRelativeCoord(x0, y0)\n      const w = Math.round(width / graph.scale)\n      const h = Math.round(height / graph.scale)\n      this.rasterized = {\n        x: v.x,\n        y: v.y,\n        width: w,\n        height: h,\n        rotation: -graph.rotation,\n        canvas\n      }\n    }\n\n    const { x, y, width, height, rotation, canvas } = this.rasterized\n    ctx.translate(x, y)\n    ctx.rotate(rotation)\n    ctx.drawImage(canvas, 0, 0, width, height)\n  }\n}","import Graph from \"..\"\nimport Rasterized from '../layer/Rasterized'\n\nlet x: number, y: number\n\nexport default function (graph: Graph): void {\n  graph.on('drop', e => {\n    const ev = e as { x: number, y: number }\n    x = Math.floor(ev.x)\n    y = Math.floor(ev.y - graph.canvas.offsetTop)\n    \n    const layer = new Rasterized(graph, x, y, graph.state.pen.color)\n    graph.add(layer)\n  })\n}","import Graph from \"..\";\nimport panzoom from \"./panzoom\";\nimport draw from \"./draw\";\nimport buket from \"./buket\";\n\nexport default function (graph: Graph): void {\n  const touchstart = (e: TouchEvent): void => {\n    graph.emit('touchstart', e)\n  }\n  const touchmove = (e: TouchEvent): void => {\n    e.preventDefault()\n    graph.emit('touchmove', e)\n  }\n  const touchend = (e: TouchEvent): void => {\n    graph.emit('touchend', e)\n  }\n  graph.canvas.addEventListener('touchstart', touchstart)\n  graph.canvas.addEventListener('touchmove', touchmove)\n  graph.canvas.addEventListener('touchend', touchend)\n\n  draw(graph)\n  panzoom(graph)\n  buket(graph)\n}","import { Layer } from './layer'\nimport Path from './layer/path'\nimport initEvent from './event'\nimport Coord from \"./utils/v2\"\nimport Pen from './layer/pen'\nimport Eraser from './layer/eraser'\nimport Rasterized from './layer/Rasterized'\n\nexport interface GraphData {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  scale: number;\n  rotation: number;\n  backgroundColor: string;\n  layers: Layer[];\n}\n\ninterface CB {\n  (...args: unknown[]): void\n}\n\nexport default class Graph {\n  canvas = document.createElement('canvas')\n  canvas2 = document.createElement('canvas')\n  canvas3 = document.createElement('canvas')\n  ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D\n  ctx2 = this.canvas2.getContext('2d') as CanvasRenderingContext2D\n  ctx3 = this.canvas3.getContext('2d') as CanvasRenderingContext2D\n  x = 0\n  y = 0\n  width = 200\n  height = 200\n  scale = 1\n  rotation = 0\n  backgroundColor = '#fff'\n  layers: Layer[] = []\n  index = -1\n  handlers: Record<string, CB[]> = {}\n  activePath: Path | null = null\n  animationId: number | null = null\n\n  state = {\n    mode: 'pen',\n    pen: { size: 1, color: '#000' },\n    eraser: { size: 1 }\n  }\n\n  constructor () {\n    this.canvas.style.background = '#fff'\n    initEvent(this)\n  }\n\n  mount (dom: HTMLElement): void {\n    dom.appendChild(this.canvas)\n    const w = dom.offsetWidth\n    const h = dom.offsetHeight\n\n    this.resize(w, h)\n  }\n\n  createLayer (type: 'Pen' | 'Eraser' | 'Rasterized', data: any) {\n    if (type === 'Pen') {\n      return new Pen(data)\n    } else if (type === 'Eraser') {\n      return new Eraser(data)\n    } else {\n      return new Rasterized(this, data.x, data.y, data.color)\n    }\n  }\n\n  load (data: GraphData) {\n    const { x, y, scale, rotation, width, height, layers, backgroundColor } = data\n    this.resize(width, height)\n    this.x = x\n    this.y = y\n    this.rotation = rotation\n    this.scale = scale\n    this.layers = layers.map(({ type, ...data}) => this.createLayer(type as any, data))\n    this.backgroundColor = backgroundColor\n    this.index = this.layers.length - 1\n    this.flush()\n  }\n\n  getData (): GraphData {\n    const { x, y, scale, rotation, width, height, layers, backgroundColor } = this\n    return { x, y, scale, rotation, width, height, backgroundColor, layers: layers.map(l => l.getData()) }\n  }\n\n  resize (w: number, h: number): void {\n    this.width = w\n    this.height = h\n    this.canvas.width =  this.canvas2.width =  this.canvas3.width = w\n    this.canvas.height = this.canvas2.height = this.canvas3.height = h\n    this.canvas.style.width = this.canvas2.style.width = this.canvas3.style.width = w + 'px'\n    this.canvas.style.height = this.canvas2.style.height = this.canvas3.style.height = h + 'px'\n    this.flush()\n  }\n\n  resetViewport () {\n    this.x = this.y = this.rotation = 0;\n    this.scale = 1;\n  }\n\n  render () {\n    if (this.animationId) window.cancelAnimationFrame(this.animationId)\n    this.drawFrame()\n    this.animationId = window.requestAnimationFrame(() => this.render())\n  }\n\n  flush () {\n    const { x, y, ctx2, scale, rotation } = this\n    const layers = this.layers.slice(0, this.index + 1)\n    ctx2.clearRect(0, 0, this.width, this.height)\n    ctx2.save()\n    ctx2.translate(x, y)\n    ctx2.scale(scale, scale)\n    ctx2.rotate(rotation)\n    this.emit('beforeRender', ctx2)\n    layers.forEach(layer => {\n      ctx2.save()\n      layer.draw(ctx2)\n      ctx2.restore()\n    })\n    ctx2.restore()\n  }\n\n  drawFrame (): void {\n    const {\n      x,\n      y,\n      scale,\n      width,\n      height,\n      rotation,\n      backgroundColor,\n      ctx,\n      ctx3\n    } = this\n\n    ctx3.clearRect(0, 0, width, height)\n    ctx3.drawImage(this.canvas2, 0, 0, width, height)\n    if (this.activePath) {\n      ctx3.save()\n      ctx3.translate(x, y)\n      ctx3.scale(scale, scale)\n      ctx3.rotate(rotation)\n      this.activePath.draw(ctx3)\n      ctx3.restore()\n    }\n\n    ctx.clearRect(0, 0, width, height)\n    ctx.fillStyle = backgroundColor\n    ctx.fillRect(0, 0, width, height)\n    ctx.drawImage(this.canvas3, 0, 0, width, height)\n  }\n\n  getRelativeCoord (x: number, y: number): Coord {\n    return new Coord(x, y)\n      .translate(-this.x, -this.y)\n      .scale(1 / this.scale, 1 / this.scale)\n      .rotate(-this.rotation)\n  }\n\n  on (eventType: string, eventHandler: CB): void {\n    if (!this.handlers[eventType]) {\n      this.handlers[eventType] = []\n    }\n    const handlers = this.handlers[eventType]\n    handlers.push(eventHandler)\n  }\n\n  off (eventType: string, eventHandler?: CB): void {\n    if (!this.handlers[eventType]) return\n    if (!eventHandler) {\n      this.handlers[eventType] = []\n      return\n    }\n\n    const handlers = this.handlers[eventType]\n    const i = handlers.indexOf(eventHandler)\n\n    if (i > -1) handlers.splice(i, 1)\n  }\n\n  emit (eventType: string, ...args: unknown[]): void {\n    const handlers = this.handlers[eventType]\n    if (!handlers || handlers.length === 0) return\n\n    handlers.forEach(cb => cb(...args))\n  }\n\n  undo () {\n    if (this.index === -1) return\n    this.index--\n    this.flush()\n  }\n\n  redo () {\n    if (this.index === this.layers.length - 1) return\n    this.index++\n    this.flush()\n  }\n\n  add (layer: Layer) {\n    this.layers = [...this.layers.slice(0, this.index + 1), layer]\n    this.index = this.layers.length - 1\n    this.flush()\n    document.body.appendChild(this.canvas2)\n  }\n\n  clear () {\n    this.layers = []\n    this.index = -1\n    this.activePath = null\n    this.flush()\n  }\n\n  setMode (mode: 'pen' | 'eraser') {\n    this.state.mode = mode\n  }\n\n  distroy () {\n    if (this.animationId) window.cancelAnimationFrame(this.animationId)\n  }\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1b2d6d4e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"header-bar\" }\nconst _hoisted_2 = { class: \"prepend\" }\nconst _hoisted_3 = { style: {\"{ 'text-align'\":\"alignment }\"} }\nconst _hoisted_4 = { class: \"append\" }\n\nimport { useRouter } from 'vue-router'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HeaderBar',\n  props: {\n    title: { default: '' },\n    alignment: { default: 'left' },\n    showBack: { type: Boolean, default: false }\n  },\n  setup(__props: any) {\n\n\n\nconst router = useRouter()\nconst back = () => router.back()\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"span\", _hoisted_2, [\n      _renderSlot(_ctx.$slots, \"prepend\")\n    ]),\n    _renderSlot(_ctx.$slots, \"default\", {}, () => [\n      _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.title), 1)\n    ]),\n    _createElementVNode(\"span\", _hoisted_4, [\n      _renderSlot(_ctx.$slots, \"append\")\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"header-bar\">\n    <span class=\"prepend\">\n      <slot name=\"prepend\"></slot>\n    </span>\n\n    <slot name=\"default\">\n      <span style=\"{ 'text-align': alignment }\">{{ title }}</span>\n    </slot>\n\n    <span class=\"append\">\n      <slot name=\"append\"></slot>\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useRouter } from 'vue-router'\n\nwithDefaults(defineProps<{\n  title?: string;\n  alignment?: string;\n  showBack?: boolean;\n}>(),{\n  title: '',\n  alignment: 'left',\n  showBack: false\n})\n\nconst router = useRouter()\nconst back = () => router.back()\n</script>\n\n<style scoped>\n.header-bar {\n  display: flex;\n  height: 40px;\n  padding: 0 30px;\n  align-items: center;\n  background-color: #00456b;\n  color: #f6f7f8;\n}\n.prepend {\n  position: absolute;\n  left: 10px;\n}\n.append {\n  position: absolute;\n  right: 10px; \n}\n</style>","import script from \"./HeaderBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HeaderBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HeaderBar.vue?vue&type=style&index=0&id=1b2d6d4e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1b2d6d4e\"]])\n\nexport default __exports__"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPrimitive","t","r","e","i","call","TypeError","String","Number","toPropertyKey","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Coord","x","y","this","matrix","a","b","c","d","f","translate","dx","dy","move","rotate","Math","cos","s","sin","scale","kx","ky","skewX","angle","PI","tan","skewY","norm","sqrt","normalVector","n","unit","n2","dot","max","min","acos","cross","flip","x0","y0","x1","y1","m","p","q","cvs","on","ev","touches","length","pageX","pageY","_x0","_y0","_x1","_y1","v","_v","ang","k","c0","getRelativeCoord","rotation","c1","Layer","Path","option","super","assign","getData","type","size","color","data","Pen","args","draw","ctx","beginPath","arc","closePath","fillStyle","fill","moveTo","lineTo","strokeStyle","lineWidth","lineCap","lineJoin","stroke","Eraser","globalCompositeOperation","path","moved","offsetY","graph","state","mode","pen","eraser","push","activePath","add","magicWand","imageData","px","py","equal","p1","p2","w","width","h","height","checked","Set","res","p0","check","has","index","document","createElement","getContext","fillRect","getImageData","g","Rasterized","rasterized","getRGBA","ctx2","forEach","_x","_y","canvas","floor","_imageData","createImageData","putImageData","round","drawImage","offsetTop","layer","touchstart","emit","touchmove","preventDefault","touchend","addEventListener","panzoom","buket","Graph","canvas2","canvas3","style","background","initEvent","mount","dom","appendChild","offsetWidth","offsetHeight","resize","createLayer","load","layers","backgroundColor","map","flush","l","resetViewport","render","animationId","window","cancelAnimationFrame","drawFrame","requestAnimationFrame","slice","clearRect","save","restore","ctx3","eventType","eventHandler","handlers","off","indexOf","splice","cb","undo","redo","body","clear","setMode","distroy","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_defineComponent","__name","props","title","default","alignment","showBack","Boolean","setup","__props","useRouter","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","_renderSlot","$slots","_toDisplayString","__exports__"],"sourceRoot":""}