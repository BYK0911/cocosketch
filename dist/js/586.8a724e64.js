"use strict";(self["webpackChunksketch"]=self["webpackChunksketch"]||[]).push([[586],{9593:function(e,o,n){n.r(o),n.d(o,{default:function(){return H}});n(4114);var a=n(6768),t=n(144),l=n(7477),s=n(3913);const r=(0,a.Lk)("span",{class:"iconfont icon-pen1 btn-tool"},null,-1);var c=(0,a.pM)({__name:"PenButton",setup(e){const o=(0,a.WQ)("graph"),n=(0,t.KR)(o.state.pen.size),l=e=>o.state.pen.size=e;return(e,s)=>{const c=(0,a.g2)("el-slider"),u=(0,a.g2)("el-popover");return(0,a.uX)(),(0,a.Wv)(u,{placement:"bottom",width:"auto",onShow:s[1]||(s[1]=e=>(0,t.R1)(o).setMode("pen")),"hide-after":0},{reference:(0,a.k6)((()=>[r])),default:(0,a.k6)((()=>[(0,a.bF)(c,{"show-tooltip":!1,modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),onChange:l,max:50},null,8,["modelValue"])])),_:1})}}});const u=c;var d=u,p=(0,a.pM)({__name:"EraserButton",setup(e){const o=(0,a.WQ)("graph"),n=(0,t.KR)(o.state.eraser.size),l=e=>o.state.eraser.size=e,s=()=>o.setMode("eraser");return(e,o)=>{const t=(0,a.g2)("el-slider"),r=(0,a.g2)("el-popover");return(0,a.uX)(),(0,a.Wv)(r,{placement:"bottom",width:"auto","hide-after":0},{reference:(0,a.k6)((()=>[(0,a.Lk)("span",{class:"iconfont icon-eraser btn-tool",onClick:s})])),default:(0,a.k6)((()=>[(0,a.bF)(t,{"show-tooltip":!1,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),onChange:l},null,8,["modelValue"])])),_:1})}}});const i=p;var k=i,v=n(4232),f=["#000000","#00456b","#483D8B","#228B22","#1E90FF","#00BFFF","#99cc33","#7FFF00","#7FFFD4","#f0f0f0","#9400d3","#A52A2A","#B22222","#DC143C","#D2691E","#B8860B","#FF8C00","#FFE4C4","#FAEBD7","#FFFAF0","#FF1493","#FFC0CB","#F0F8FF"];const F={class:"color-picker"};var m=(0,a.pM)({__name:"ColorButton",setup(e){const o=(0,t.KR)(),n=(0,a.WQ)("graph"),l=(0,t.KR)(n.state.pen.color),s=()=>{o.value.show()},r=e=>n.state.pen.color=e,c=e=>{if(e.touches.length>1)return;let o=e.touches[0].pageX,a=e.touches[0].pageY;const t=e=>{o=e.touches[0].pageX,a=e.touches[0].pageY},l=()=>{window.removeEventListener("touchend",l),window.removeEventListener("touchmove",t),document.elementFromPoint(o,a)===n.canvas&&n.emit("drop",{x:o,y:a})};window.addEventListener("touchmove",t),window.addEventListener("touchend",l)};return(e,n)=>{const u=(0,a.g2)("el-color-picker");return(0,a.uX)(),(0,a.CE)("span",{class:"btn-tool color-picker-wrap",onTouchstart:c,onClick:s},[(0,a.Lk)("span",{class:"color-grid",style:(0,v.Tr)({background:l.value})},null,4),(0,a.Lk)("span",F,[(0,a.bF)(u,{ref_key:"picker",ref:o,modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value=e),"show-alpha":"",predefine:(0,t.R1)(f),onChange:r},null,8,["modelValue","predefine"])])],32)}}}),h=n(1241);const b=(0,h.A)(m,[["__scopeId","data-v-3b2d4dda"]]);var g=b,_=(0,a.pM)({__name:"UndoButton",setup(e){const o=(0,a.WQ)("graph");return(e,n)=>((0,a.uX)(),(0,a.CE)("span",{class:"iconfont icon-Undo btn-tool",onClick:n[0]||(n[0]=(...e)=>(0,t.R1)(o).undo&&(0,t.R1)(o).undo(...e))}))}});const w=_;var C=w,L=(0,a.pM)({__name:"RedoButton",setup(e){const o=(0,a.WQ)("graph");return(e,n)=>((0,a.uX)(),(0,a.CE)("span",{class:"iconfont icon-Redo btn-tool",onClick:n[0]||(n[0]=(...e)=>(0,t.R1)(o).redo&&(0,t.R1)(o).redo(...e))}))}});const R=L;var V=R;const E=e=>((0,a.Qi)("data-v-26962d7c"),e=e(),(0,a.jt)(),e),B={class:"btn-tool"},W=E((()=>(0,a.Lk)("span",{class:"iconfont icon-menu",style:{color:"#f6f7f8","font-size":"20px"}},null,-1))),A=E((()=>(0,a.Lk)("i",{class:"iconfont icon-background-f"},null,-1))),M=E((()=>(0,a.Lk)("i",{class:"iconfont icon-marquee"},null,-1))),x=E((()=>(0,a.Lk)("i",{class:"iconfont icon-download"},null,-1))),K=E((()=>(0,a.Lk)("i",{class:"iconfont icon-delete"},null,-1))),X={class:"color-picker"},Q={class:"img-wrap"},U=["src"];var y=(0,a.pM)({__name:"MoreOperations",setup(e){const o=(0,t.KR)(!1),n=(0,t.KR)(""),l=(0,a.WQ)("graph"),s=(0,t.KR)(),r=(0,t.KR)(l.backgroundColor),c=e=>l.backgroundColor=e,u=()=>s.value.show(),d=()=>l.resetViewport(),p=()=>l.clear(),i=()=>{o.value=!0,n.value=l.canvas.toDataURL()};return(e,l)=>{const k=(0,a.g2)("el-dropdown-item"),v=(0,a.g2)("el-dropdown-menu"),F=(0,a.g2)("el-dropdown"),m=(0,a.g2)("el-color-picker"),h=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("span",B,[(0,a.bF)(F,null,{dropdown:(0,a.k6)((()=>[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{onClick:u},{default:(0,a.k6)((()=>[A,(0,a.eW)(" 背景颜色 ")])),_:1}),(0,a.bF)(k,{onClick:d},{default:(0,a.k6)((()=>[M,(0,a.eW)(" 重置视口 ")])),_:1}),(0,a.bF)(k,{onClick:i},{default:(0,a.k6)((()=>[x,(0,a.eW)(" 导出图片 ")])),_:1}),(0,a.bF)(k,{divided:""},{default:(0,a.k6)((()=>[(0,a.Lk)("span",{style:{color:"var(--el-color-danger)"},onClick:p},[K,(0,a.eW)("清空画布 ")])])),_:1})])),_:1})])),default:(0,a.k6)((()=>[W])),_:1}),(0,a.Lk)("span",X,[(0,a.bF)(m,{ref_key:"picker",ref:s,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),predefine:(0,t.R1)(f),onChange:c,"show-alpha":""},null,8,["modelValue","predefine"])]),(0,a.bF)(h,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),title:"保存图片",direction:"btt",size:"80%"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Q,[(0,a.Lk)("img",{src:n.value},null,8,U)])])),_:1},8,["modelValue"])])}}});const D=(0,h.A)(y,[["__scopeId","data-v-26962d7c"]]);var z=D,I=n(5477),j=n(3863),q=n(1387);const P=e=>((0,a.Qi)("data-v-6ccb30c2"),e=e(),(0,a.jt)(),e),S={class:"flex-v wrap"},T={class:"tools-group"},Y=P((()=>(0,a.Lk)("i",{class:"divider"},null,-1)));var G=(0,a.pM)({__name:"SketchView",setup(e){const o=(0,q.lq)(),n=new I.A,r=(0,t.KR)(),c=j.A.pics,u=(0,q.rd)(),p=()=>{const e=n.getData();o.params.index?c[+o.params.index]=e:c.push(e),u.back()};return o.params.index&&n.load(c[+o.params.index]),(0,a.Gt)("graph",n),(0,a.sV)((()=>{n.mount(r.value),n.render()})),(e,o)=>{const n=(0,a.g2)("el-icon");return(0,a.uX)(),(0,a.CE)("div",S,[(0,a.bF)(s.A,{"show-back":""},{prepend:(0,a.k6)((()=>[(0,a.Lk)("span",{class:"icon-back",onClick:p},[(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.bF)((0,t.R1)(l.nkM))])),_:1})])])),append:(0,a.k6)((()=>[(0,a.bF)(z)])),default:(0,a.k6)((()=>[(0,a.Lk)("span",T,[(0,a.bF)(C),(0,a.bF)(V),Y,(0,a.bF)(d),(0,a.bF)(k),(0,a.bF)(g)])])),_:1}),(0,a.Lk)("div",{class:"flex-main sketch-canvas",ref_key:"graphRef",ref:r},null,512)])}}});const O=(0,h.A)(G,[["__scopeId","data-v-6ccb30c2"]]);var H=O}}]);
//# sourceMappingURL=586.8a724e64.js.map